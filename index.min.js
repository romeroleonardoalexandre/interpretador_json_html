class React{constructor(a){this.formData=a,this.formStepsList=[]}init(){return this.initReact(this.formData)}elementCreate(a){let b="";return a.forEach(a=>{switch(a.name){case"heading":b+=this.heading(a);break;case"paragraph":b+=this.paragriph(a);break;case"text":b+=this.text(a);break;case"number":b+=this.number(a);break;case"email":b+=this.text(a);break;case"textarea":b+=this.textarea(a);break;case"pagebreak":b+=this.pagebreak(a);break;case"radio":b+=this.radio(a);break;case"checkbox":b+=this.checkbox(a);break;case"selectlist":b+=this.selectlist(a);break;case"date":b+=this.date(a);break;case"file":b+=this.file(a);break;case"button":b+=this.button(a);break;case"recaptcha":b+=this.recaptcha(a);break;case"spacer":b+=this.spacer(a);break;case"signature":b+=this.signature(a);break;case"matrix":b+=this.matrix(a);break;case"snippet":b+=this.snippet(a);break;default:b+="";}}),b}formInit(a){return this.classReact(a)}importsReact(){return`
		import React, { Component } from 'react'

		`}initReact(a){return`
		${this.importsReact()}
		export default class Formulario extends Component {
			${this.constructorReact()+this.componentDidupdateReact()+this.componentWillMountReact()+this.functionsReact()+this.initRenderReact(a)}
		}

		`}constructorReact(){return`
			constructor() {
				super();
				this.state = {
					exemplo: false,
					page: 0
				};
				this.handleChange = this.handleChange.bind(this);
			}

		`}componentWillMountReact(){return`
		componentWillMount() {
			this.setState({ exemplo: true, page: 0 });
		}

		`}componentDidupdateReact(){return`
		componentDidUpdate(prevProps, prevState) {
			if (prevState.page != this.state.page){
				
				for (let field of document.getElementsByTagName("fieldset")){
					if (parseInt(field.getAttribute('data-index')) == this.state.page){
						
						field.classList.remove("hidden")
						field.classList.add("show")
					}else{
						field.classList.remove("show")
						field.classList.add("hidden")
					}
				}

				let steps = document.querySelectorAll('.step')

				for (var i = 0; i < steps.length; ++i){
					if (parseInt(steps[i].getAttribute('data-step')) == this.state.page){
						steps[i].classList.add("current")
					}else{
						steps[i].classList.remove("current")
					}
				}
			}
		}

		`}functionsReact(){return`
		submit ()  {
			console.log(this.state)
			alert("Formulario submitou");
		}

		next ()  {
			this.setState({page: this.state.page + 1})
		}

		previous ()  {
			this.setState({page: this.state.page - 1})
		}

		onValueChange(event) {
			this.setState({
			  selectedOption: event.target.value
			});
		}

		handleChange (evt) {
			this.setState({ [evt.target.name]: evt.target.value });
		}

		`}initRenderReact(a){return`
			render(){
				return (
					${this.formReact(a)}
				)
			}
		`}heading(a){return`
		<div className="col-xs-12">
			<h3 className="legend">${a.fields.text.value}</h3>
		</div>

		`}paragriph(a){return`
		<div className="col-xs-12">
			<p>${a.fields.text.value}</p>
		</div>

		`}text(a){return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group">
				<label  className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">${a.fields.label.value}</label>
				<input type="text" onChange={(event)=>this.handleChange(event)} id="${a.fields.id.value}" name="${a.fields.id.value}" data-alias="${a.fields.alias.value}" placeholder="${a.fields.placeholder.value}" className="${a.fields.cssClass.value}" />
			</div>
		</div>

		`}number(a){let b=a.fields.inputType.value.filter(function(a){return!0==a.selected});return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group">
				<label  className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">${a.fields.label.value}</label>
				<input type="${b[0].value}" onChange={(event)=>this.handleChange(event)} id="${a.fields.id.value}" name="${a.fields.id.value}" data-alias="${a.fields.alias.value}"  className="${a.fields.cssClass.value}" />
			</div>
		</div>
		`}spacer(a){return`
		<div className="${a.fields.containerClass.value}">
			<div style="{{height: ${a.fields.height.value}}}" ></div>
		</div>
		`}textarea(a){return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group">
				<label  className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">${a.fields.label.value}</label>
				<textarea type="${a.name}" onChange={(event)=>this.handleChange(event)} rows="${a.fields.fieldSize.value}" id="${a.fields.id.value}" name="${a.fields.id.value}" data-alias="${a.fields.alias.value}" placeholder="${a.fields.placeholder.value}" className="${a.fields.cssClass.value}" />
			</div>
		</div>

		`}formStepsActions(a){if(1==a)return`<div className="form-action col-xs-12">
				<button onClick={() => this.next()} type="button" className="btn btn-primary next" >Seguinte</button>
			</div>`;return a<this.formStepsList.length?`<div className="form-action col-xs-12">
				<button onClick={() => this.previous()} type="button" className="btn btn-primary previous" >Anterior</button>
				<button onClick={() => this.next()} type="button" className="btn btn-primary next" >Seguinte</button>
			</div>`:``}pagebreak(a){let b=a.fields.id.value.split("_"),c=this.formStepsActions(parseInt(b[1]),a);return`
				${c}
		</fieldset>
		<fieldset className="row" data-index="${b[1]}">				
		`}radio(a){let b="";for(var c=0;c<a.fields.radios.value.length;c++)b+=`<div className="radio ">
				<input type="radio" name="${a.fields.id.value}" id="${a.fields.id.value}_${a.fields.radios.value[c]}" defaultValue="" data-alias="" />
					<label htmlFor="${a.fields.id.value}_${c}" className="${a.fields.cssClass.value}">
						${a.fields.radios.value[c].split("|")[0]}
					</label>
				</div>
				`;return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group"> 
				<label className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">${a.fields.label.value}</label>
					${b}
				<span id="${a.fields.id.value}"></span>
			</div>
		</div>

		`}checkbox(a){let b="";for(var c=0;c<a.fields.checkboxes.value.length;c++){let d=a.fields.checkboxes.value[c].split("|");b+=`<div className="checkbox ">
				<input type="checkbox" onChange={(event)=>this.handleChange(event)} name="${a.fields.id.value}[]" id="${a.fields.id.value}_${a.fields.checkboxes.value[c]}" defaultValue="${a.fields.checkboxes.value[c]}" data-alias="" ${1<d.length?"defaultChecked":""} />
				<label htmlFor="${a.fields.id.value}_${a.fields.checkboxes.value[c]}" className="checkbox-inline">
					${d[0]} </label>
			</div>
			`}return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group"> 
				<label className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">${a.fields.label.value}</label>
				
				${b}
				<span id="${a.fields.id.value}"></span>
			</div>
		</div>

		`}selectlist(a){let b="";return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group">
				<label className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">${a.fields.label.value}</label>
				<select onChange={(event)=>this.handleChange(event)} id="${a.fields.id.value}" name="${a.fields.id.value}[]" data-alias=""  className="${a.fields.cssClass.value}">
					${a.fields.options.value.forEach(a=>{b+=`<option>${a.split("|")[0]}</option>

						`})}
					${b}
				</select>
			</div>
		</div>

		`}date(a){let b=a.fields.inputType.value.filter(function(a){return!0==a.selected});return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group">
				<label className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">${a.fields.label.value}</label>
				<input type="${b[0].value}" onChange={(event)=>this.handleChange(event)} id="${a.fields.id.value}" name="${a.fields.id.value}" defaultValue="" data-alias="" className="${a.fields.cssClass.value}" />
			</div>
		</div>

		`}file(a){return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group">
				<label className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">${a.fields.label.value}</label>
				<input type="file" id="${a.fields.id.value}" name="${a.fields.id.value}[]" data-alias="" accept=".gif, .jpg, .png" />
			</div>
		</div>

		`}signature(a){return`
		<div className="${a.fields.containerClass.value}">
			<div className="form-group">
				<label  className="${a.fields.labelClass.value}" htmlFor="${a.fields.id.value}">Signature</label>
				<div className="signature-pad">
					<canvas id="${a.fields.id.value}" width="${a.fields.width.value}" height="${a.fields.height.value}" data-color="${a.fields.color.value}" ></canvas>
				</div>
				
				<div className="signature-pad-actions">
					<button type="button" id="clear_${a.fields.id.value}" name="clear_${a.fields.id.value}" className="btn btn-sm btn-default btn-clear" data-exclude="true">Apagar</button>
					<button type="button" id="undo_${a.fields.id.value}" name="undo_${a.fields.id.value}" className="btn btn-sm btn-default btn-undo" data-exclude="true">Undo</button>
				</div>
				<input type="hidden" name="hidden_${a.fields.id.value}" id="hidden_${a.fields.id.value}" value="" data-alias="${a.fields.alias.value}" data-label="${a.fields.id.value}"  />
			</div>
		</div>
		`}recaptcha(a){return`
		<div className="form-group ${a.fields.containerClass.value}">
			<div id="${a.fields.id.value}" className="g-recaptcha" data-sitekey="6Lf5Tt4ZAAAAAPCMN7WSRFSpb40H4tWNU9FcTuwI" data-theme="${!0===a.fields.theme.value[0].selected?a.fields.theme.value[0].value:a.fields.theme.value[1].value}" data-type="${!0===a.fields.theme.value[0].selected?a.fields.type.value[0].value:a.fields.type.value[1].value}" data-size="${!0===a.fields.size.value[0].selected?a.fields.size.value[0].value:a.fields.size.value[1].value}"></div>
		</div>
		`}matrix(a){let b="",c=a.fields.inputType.value.filter(function(a){return!0==a.selected}),d="";for(var e=0;e<a.fields.answers.value.length;e++)d+=`<th className="text-center">${a.fields.answers.value[e].split("|")[0]}</th>`;let f="";switch(c[0].value){case"checkbox":f+=this.matrix_checkbox(a);break;default:f+="";}return b+=`<div className="${a.fields.containerClass.value}">
					<table id="${a.fields.id.value}" className="table-matrix table table-striped table-hover" data-matrix-type="${c[0].value}">
						<caption>
							<label htmlFor="${a.fields.id.value}" className="control-label">${a.fields.label.value}</label>
						</caption>
						<thead>
							<tr>
								<th>&nbsp;</th>
								${d}
							</tr>
						</thead>
						<tbody>
							${f}
						</tbody>
					</table>
					</div>
					`,b}matrix_checkbox(a){let b="";for(var c=0;c<a.fields.questions.value.length;c++){b+=`<tr>
								<th>
									<label htmlFor="${a.fields.id.value}_${c}">${a.fields.questions.value[c]}</label>
								</th>
								`;for(var d=0;d<a.fields.answers.value.length;d++)b+=`<td class="text-center ${a.fields.id.value}_q_${c} ${a.fields.id.value}_a_${d}" title="${a.fields.answers.value[c]}">
								<div class="checkbox">
									<span id="${a.fields.id.value}_0"></span>
									<input type="checkbox" onChange={(event)=>this.handleChange(event)} name="${a.fields.id.value}_${c}[]" 
										id="${a.fields.id.value}_${c}_${d}" 
										data-matrix-id="${a.fields.id.value}" 
										data-matrix-label="${a.fields.label.value}" 
										data-matrix-question="${a.fields.questions.value[c]}"
										data-matrix-answer="${a.fields.answers.value[c]}" 
										value="${a.fields.answers.value[c]}" />
									<label htmlFor="${a.fields.id.value}_${c}_${d}"></label>
								</div>
							</td>
							`;b+="</tr>"}return b}snippet(a){return a.fields.snippet.value.replace("\"font-family: monospace;\"","{{fontFamily: 'monospace'}}"),a.fields.snippet.value.replace("\"background-color: #b4d7ff;\"","{{backgroundColor: '#b4d7ff'}}"),`
		<div className="snippet ${a.fields.containerClass.value}">
			${a.fields.snippet.value}
		</div>
		`}formReact(a){return`
		<div className="container">
			<div className="row">
				<div className="col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
					<div className="form-view">
						<div className="panel panel-default">
							<div className="panel-body">
								<div className="form-container">
									<div id="messages"></div>
									<form action="#" method="post" encType="multipart/form-data" id="form-app">
										${"undefined"==typeof a.settings.formSteps?"":this.formSteps(a.settings.formSteps)}
										<fieldset className="row" data-index="0">
										${this.elementCreate(a.initForm)}
										</fieldset>
									</form>
									${"undefined"==typeof a.settings.formSteps.progressBar?"":this.progressBar()}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		`}button(a){return`
		<div className="${a.fields.containerClass.value}">
		${0<this.formStepsList.length?`
				<button onClick={() => this.previous()} type="button" className="btn btn-primary previous" >Anterior</button>
			`:``}
		<button onClick={() => this.submit()} type="button" id="${a.fields.id.value}" name="${a.fields.id.value}" className="${a.fields.cssClass.value}">Enviar</button>
		</div>
		`}formSteps(a){let b="";this.formStepsList=a.fields.steps.value;for(var c=0;c<this.formStepsList.length;c++)b+=`<div className="step ${0==c?"current":""}" data-step="${c}">
						<div className="stage">${c+1}</div> 
						<div className="title">${this.formStepsList[c]}</div>
					</div>
				`;return`
		<div className="steps">
			${b}
		</div>

		`}progressBar(){return`
		<div id="progress" className="progress" style={{display: "none"}}>
			<div id="bar" className="progress-bar" role="progressbar" style={{width: 0}}>
				<span id="percent" className="sr-only">0% Complete</span>
			</div>
		</div>

		`}}function initInterpretador(a="react",b={}){let c={};return"react"==a&&b&&(c=new React(b)),c.init()}